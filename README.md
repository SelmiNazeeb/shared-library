This is the shared library logic
